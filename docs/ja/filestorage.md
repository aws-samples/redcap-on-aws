JP | [EN](../en/filestorage.md)

# REDCap File Storage

## Amazon S3との統合

デフォルトでは、ステートレスな大規模なアプリケーションのデータを永続化しませんが、コンテナアプリケーションでは、コンテナを削除してもストレージを使用してデータを永続化する必要があります。

AWS App Runnerで稼働しているコンテナには、3GBのエフェメラルな(一時的な)ストレージ以外に追加のストレージはありません。従って、ここでの推奨事項は、REDCapとAmazon S3の統合を有効化することです。Amazon S3統合にあたって、IAMアクセスの認証情報と`redcap_config`テーブルの有効化が必要です。統合を有効化するSQLは、以下のように `yarn gen redcap config`を実行することで自動生成されます。

```
Use S3 bucket as storage for REDCap? ・ Yes
```

### バケットのバージョニング

Amazon S3バケットのバージョニングにより、バケット内の全てのファイルの全てのバージョンを保存、取得、復元できます。バージョニングの有効化は、誤って削除または上書きされたオブジェクトを復元するのに役立ちます。バージョニングは全ての環境で可能ですが、デフォルトでは本番環境のデプロイ時に有効化するようにしています。
